<?php
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
header('Content-Type: text/html; charset=utf-8');
ini_set('display_errors', 1);
error_reporting(E_ALL);

echo "<h1>üïµÔ∏è‚Äç‚ôÇÔ∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ CSV-—Ñ–∞–π–ª–∞</h1>";

$csvFile = 'Module 2 FINAL(1).csv';

if (!file_exists($csvFile)) {
    die("<p style='color:red;'><strong>–û–®–ò–ë–ö–ê:</strong> –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: " . htmlspecialchars($csvFile) . "</p>");
}

echo "<p>–û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª: <strong>" . htmlspecialchars($csvFile) . "</strong></p>";
echo "<p>–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: <strong>;</strong> (—Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π)</p>";
echo "<hr>";

if (($handle = fopen($csvFile, "r")) !== FALSE) {
    // –ß–∏—Ç–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
    $header = fgetcsv($handle, 0, ";");
    echo "<h2>–ó–∞–≥–æ–ª–æ–≤–∫–∏ (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞):</h2>";
    echo "<p>–ù–∞–π–¥–µ–Ω–æ –∫–æ–ª–æ–Ω–æ–∫ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ: <strong>" . count($header) . "</strong></p>";
    echo "<pre>";
    print_r($header);
    echo "</pre>";
    echo "<p>–ú—ã –æ–∂–∏–¥–∞–µ–º –Ω–∞–π—Ç–∏ —Ç–µ–∫—Å—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –≤ 11-–π –∫–æ–ª–æ–Ω–∫–µ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∏–Ω–¥–µ–∫—Å 10).</p>";
    echo "<hr>";

    $rowNumber = 1;
    // –ß–∏—Ç–∞–µ–º –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏
    while (($data = fgetcsv($handle, 0, ";")) !== FALSE && $rowNumber <= 5) {
        echo "<h3>–ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö ‚Ññ" . $rowNumber . "</h3>";
        echo "<p>–ù–∞–π–¥–µ–Ω–æ –∫–æ–ª–æ–Ω–æ–∫ –≤ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ: <strong>" . count($data) . "</strong></p>";
        
        echo "<h4>–ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–æ–∫–∏ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞:</h4>";
        echo "<pre>";
        var_dump($data); // var_dump –¥–∞—ë—Ç –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π, —á–µ–º print_r
        echo "</pre>";

        echo "<h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ 11-–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (–∏–Ω–¥–µ–∫—Å 10):</h4>";
        if (isset($data[10])) {
            echo "<p>–≠–ª–µ–º–µ–Ω—Ç \$data[10] <strong>—Å—É—â–µ—Å—Ç–≤—É–µ—Ç</strong>.</p>";
            $trimmedContent = trim($data[10]);
            
            echo "<p>–ï–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: <code>\"" . htmlspecialchars($trimmedContent) . "\"</code></p>";

            if (empty($trimmedContent)) {
                echo "<p style='color:red;'><strong>–í—ã–≤–æ–¥:</strong> –≠–ª–µ–º–µ–Ω—Ç –ø—É—Å—Ç–æ–π. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è.</p>";
            } else {
                echo "<p style='color:green;'><strong>–í—ã–≤–æ–¥:</strong> –≠–ª–µ–º–µ–Ω—Ç –ù–ï –ø—É—Å—Ç–æ–π. –° —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π –≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ —Å—Ä–∞–±–æ—Ç–∞—Ç—å.</p>";
            }
        } else {
            echo "<p style='color:red;'><strong>–í—ã–≤–æ–¥:</strong> –≠–ª–µ–º–µ–Ω—Ç \$data[10] <strong>–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢</strong>. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤ —Å—Ç—Ä–æ–∫–µ –º–µ–Ω—å—à–µ 11 –∫–æ–ª–æ–Ω–æ–∫, –∏ –ø—Ä–æ–±–ª–µ–º–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ.</p>";
        }
        echo "<hr>";
        $rowNumber++;
    }
    fclose($handle);
} else {
    echo "<p style='color:red;'><strong>–û–®–ò–ë–ö–ê:</strong> –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å CSV-—Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è.</p>";
}
?>
